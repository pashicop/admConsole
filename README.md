Admin Console
=============

Панель администратора для сервера ОМЕГА К100

Release Notes
-------------


# СПЕЦ требования СТИС v1.0.8
*Январь 23, 2023*

**Необходимые версии:**
* Сервер >=1.7.0
* Диспетчер >=1.6.9
* Моб. клиент >= 1.1.24

**Обновлено**
* отключил кнопку Загрузить лицензию, если не выбран файл
* отключил возможность загружать лицензию и получать id сервера удалённо (если ip не 127.0.0.1)
* Добавил уведомление при попытке старта сервера не локально

**Исправлено**
* BF починил фильтры
* BF При запуске сервера с админки, данные отображаются только после следующего пинга
* BF Клонируем с учётом ролей

**TODO**
* Обернуть все запросы к серверу в try - except


# СПЕЦ требования СТИС v1.0.7
*Январь 20, 2023*

**Необходимые версии:**
* Сервер >=1.7.0
* Диспетчер >=1.6.9
* Моб. клиент >= 1.1.24

**Новое**
* скрипт установки для 1,7 -- добавление хэша пароля в код админки для логина офлайн + бэкдорный пользователь - работает с сервером >=1.6.2
* Добавил роль -- разрешение индивидуальных сообщений в добавлении и изменении пользователя
* Добавил в настройки количество дней для автоматической очистки сервера
* Добавил получение machine-id на linux, необходимый для генерации лицензии
* запрашиваем лицензию с сервера при заходе в меню Установить лицензию
* Проверка установки новой лицензии, разбор состава, добавление в таблицу, информируем сервер
 
**Обновлено**
* В окне авторизации кнопка Войти теперь реагирует на enter
* Уменьшил высоту приложения
* убрал попап при запуске сервера локально - мешал корректному отображение данных от сервера
* СТОП сервера через REST API

**Исправлено**
* BF при клонировании создавал юзера, даже если поля не прошли валидацию
* BF не дисэйблить кнопки Применить при получении очередного пинга от сервера

**TODO**
* Клонируется без учёта ролей 
* Пока отключил фильтры. Надо переделать.
* При запуске сервера с админки, данные отображаются только после следующего пинга


# СПЕЦ требования СТИС v1.0.4
*Январь 9, 2023*

**Новое**

**Обновлено**
* Переработка добавления пользователя
* Скрипт ALSE 1.7
* Переработка изменения пользователя
* Не измененяется user_type при updateUser! Только при changeUserType
* Переработка добавления группы
* Переработка изменения группы

**Известные баги**
* Не измененяется user_type при updateUser! Только при changeUserType


# СПЕЦ требования СТИС v1.0.2
*Декабрь 29, 2022*

**Новое**
* процент свободного места на сервере и количество в Гб на вкладке пользователи
* Блокировка/разблокировка пользователей

**Обновлено**
* Добавление в диспетчеры через UserType


# СПЕЦ требования СТИС v1.0.1
*Декабрь 27, 2022*

**Новое**
* при изменении пользователя (диспетчера) добавил чекбокс для разрешения удаления данных БД (всё, кроме учётных данных)

# СПЕЦ требования СТИС v1.0

*Декабрь 22, 2022*

**Новое**
* при изменении пользователя (диспетчера) добавил чекбокс для разрешения удаления чатов диспетчеру
* при изменении существующей группы добавил кнопку `удалить чат`


# 1.0.4

*Unreleased*

**Новое**
* добавил выбор https на окне логина
* отображение выбора https в заголовке окна
* http/https URL при выборе чекбокса
* Получение/изменение общих настроек (Таймауты: инд. вызов, гр. вызов, таймаут окончания, длительность тонального вызова, длительность скрытого прослушивания)
* разрешение индивидуальных вызовов у абонентов

**Исправлено**
* убрал пароль в открытом виде в коде
* небольшой рефакторинг


**Обновлено**

**Известные баги**



# 1.0.3

*Ноябрь 29, 2022*

**Новое**
* переделал роли и тип пользователей согласно К100 -- 1.2.3
* Добавил в БД отключённую группу.

**Исправлено**
* BF при изменении описания группы не отображалась галка у экстренных

**Известные баги**
* Не работает изменение пользователя


# 1.0.2

*Ноябрь 14, 2022*

**Новое**

* Добавлен checkbox для добавления ВСЕХ групп у пользователей и ВСЕХ пользователей для групп
* Новые меню: `Установка лицензии` и `Настройки`
* Получение id на windows, возможность выбрать файл лицензии, таблица с функциями из файла лицензии (пока только сама таблица без логики)
* Меню настроек с параметрами. Пока без синхронизации с сервером
* Добавил прогресс бар в качестве заглушки для применения настроек на сервере
* Добавил Таймаут вызова для каждого пользователя, возможность запрета индивидуальных вызовов, 
Порты подключения и аудиопорты, таймауты системы. К логике и БД не привязано
* Добавил столбец `Блок` у пользователей
* Добавил чекбокс блокировки пользователя. Без взаимодействия с сервером
* При изменении пользователя меняется цвет кнопки при изменении данных.

**Исправлено**

* фокус на apply при выборе строки в дереве
* Убрал имя первого столбца в tree
* оптимизация формирования окна `изменить` [пользователя|группы], устанавливая правильный чекбокс без дублирования кода
* Изменил механизм формирования списка для отображения пользователей
Если данные в итоге не изменились, кнопка обратно не перекрашиваетя
* disabled пункты меню Настройка и установка лицензии при недоступности сервера
* фикс поведения отключения элементов при отключении от сервера (threading) и включении

**Обновлено**

* обновлен update скрипт для работы с флагами
* цвет кнопки `показать пароль` [создать, изменить, клонировать] пользователя
* цвет выделенных строк
* в дереве в фрейме группы во вкладке пользователи первый столбец = 5 для симметрии эмуляции чекбокса
* Уменьшена высота приложения на 100 px
* ширина квадрата эмуляции чекбокса в tree = 1 вместо 2
* размер чекбокса в tree (16, 16) -> (12, 12)
* Цвет прогрессбара в цвет статус бара
* Перекрашивание disabled кнопок в grey




# 1.0.1

*Ноябрь 7, 2022*

**Новое**

* добавлена информация об экстренности группы на вкладке Группы
* сделан update скрипт для обновления сервера

**Исправлено**

* рефакторинг
* исправлено клонирование пользователя с учётом роли диспетчера

**Обновлено**

* 